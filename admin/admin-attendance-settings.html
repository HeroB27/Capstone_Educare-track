<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Settings - Educare Admin</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="../assets/supabase-client.js"></script>
    <script src="../core/general-core.js"></script>
    <script src="admin-core.js" defer></script>
    <script src="admin-attendance-settings.js" defer></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        violet: {
                            50: '#f5f3ff', 100: '#ede9fe', 200: '#ddd6fe', 300: '#c4b5fd',
                            400: '#a78bfa', 500: '#8b5cf6', 600: '#7c3aed', 700: '#6d28d9',
                            800: '#5b21b6', 900: '#4c1d95', 950: '#2e1065'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans antialiased">

    <!-- Floating Sidebar -->
    <aside class="fixed top-0 left-0 h-full w-64 bg-white/80 backdrop-blur-xl border-r border-gray-200/50 shadow-xl z-40 flex flex-col">
        <!-- Logo -->
        <div class="p-6 border-b border-gray-100">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-br from-violet-400 to-violet-600 rounded-xl flex items-center justify-center shadow-lg shadow-violet-200">
                    <i data-lucide="graduation-cap" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                    <h1 class="font-bold text-gray-800 text-lg">EDUCARE</h1>
                    <p class="text-xs text-gray-500 font-medium">Admin Portal</p>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
            <a href="admin-dashboard.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="layout-dashboard" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">Dashboard</span>
            </a>
            <a href="admin-user-management.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="users" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">User Management</span>
            </a>
            <a href="admin-class-management.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="building-2" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">Class Management</span>
            </a>
            <a href="admin-class-and-subject.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="book-open" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">Classes & Subjects</span>
            </a>
            <a href="admin-data-analytics.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="bar-chart-2" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">Attendance Reports</span>
            </a>
            <a href="admin-announcements.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="megaphone" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">Announcements</span>
            </a>
            <a href="admin-idmanagement.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="id-card" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">ID Management</span>
            </a>
            <a href="admin-idtemplate.html" class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 hover:text-violet-600 transition-all duration-200 group">
                <i data-lucide="stamp" class="w-5 h-5 group-hover:text-violet-500"></i>
                <span class="font-medium text-sm">ID Templates</span>
            </a>
            <a href="admin-attendance-settings.html" class="flex items-center gap-3 px-4 py-3 rounded-xl bg-violet-50 text-violet-600 shadow-sm border border-violet-100 transition-all duration-200">
                <i data-lucide="settings" class="w-5 h-5"></i>
                <span class="font-bold text-sm">Attendance Settings</span>
            </a>
        </nav>

        <!-- Admin Profile -->
        <div class="p-4 border-t border-gray-100">
            <div class="bg-gradient-to-br from-violet-50 to-gray-50 rounded-xl p-4 border border-gray-100">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-violet-400 to-violet-600 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-violet-200">
                        A
                    </div>
                    <div class="flex-1 min-w-0">
                        <p id="admin-name" class="font-bold text-gray-800 text-sm truncate">Admin</p>
                        <p class="text-xs text-gray-500 truncate">System Administrator</p>
                    </div>
                    <button onclick="logout()" class="p-2 hover:bg-white rounded-lg transition text-gray-400 hover:text-red-500">
                        <i data-lucide="log-out" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="ml-64 min-h-screen">
        <!-- Top Header -->
        <header class="sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-gray-100">
            <div class="flex items-center justify-between px-8 py-4">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Attendance Settings</h2>
                    <p class="text-sm text-gray-500 mt-0.5">Configure school hours, late thresholds, and attendance rules</p>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="saveAllSettings()" class="flex items-center gap-2 px-4 py-2.5 bg-violet-600 hover:bg-violet-700 text-white rounded-xl text-sm font-medium shadow-lg shadow-violet-200 transition-all">
                        <i data-lucide="save" class="w-4 h-4"></i>
                        Save All Changes
                    </button>
                </div>
            </div>
        </header>

        <!-- Content -->
        <div class="p-8">
            <!-- Settings Tabs -->
            <div class="bg-white rounded-2xl border border-gray-100 shadow-sm mb-6">
                <div class="border-b border-gray-100 px-4">
                    <nav class="flex gap-1">
                        <button onclick="switchTab('thresholds')" class="flex items-center gap-2 px-6 py-4 border-b-2 border-violet-500 text-violet-600 font-semibold transition-all" id="tab-thresholds">
                            <i data-lucide="clock" class="w-4 h-4"></i>
                            Late Thresholds
                        </button>
                        <button onclick="switchTab('attendance-rules')" class="flex items-center gap-2 px-6 py-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium transition-all" id="tab-attendance-rules">
                            <i data-lucide="clipboard-list" class="w-4 h-4"></i>
                            Attendance Rules
                        </button>
                        <button onclick="switchTab('notifications')" class="flex items-center gap-2 px-6 py-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium transition-all" id="tab-notifications">
                            <i data-lucide="bell" class="w-4 h-4"></i>
                            Notifications
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Late Thresholds Tab -->
            <div id="thresholdsTab">
                <form id="thresholdsForm" class="space-y-6">
                    
                    <!-- Entry Times Section -->
                    <div class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-100 bg-emerald-50/50">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center">
                                    <i data-lucide="clock" class="w-5 h-5 text-emerald-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Entry Times</h3>
                                    <p class="text-sm text-gray-500">When students arrive at school</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Kinder Entry Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="entry_kinder" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="07:30">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Kinder arrival time</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 1-6 Entry Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="entry_g1_g6" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="07:30">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Elementary arrival time</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 7-10 Entry Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="entry_g7_g10" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="07:30">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Junior High arrival time</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 11-12 Entry Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="entry_g11_g12" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="07:30">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Senior High arrival time</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Late Thresholds Section -->
                    <div class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-100 bg-amber-50/50">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center">
                                    <i data-lucide="timer" class="w-5 h-5 text-amber-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Late Thresholds</h3>
                                    <p class="text-sm text-gray-500">Entry time + grace period before marking as late</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Kinder Late Threshold</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="threshold_kinder" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="08:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Default: Entry + 30 min</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 1-3 Late Threshold</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="threshold_g1_g3" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="08:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Primary grades cutoff</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 4-6 Late Threshold</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="threshold_g4_g6" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="08:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Intermediate grades cutoff</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 7-8 Late Threshold</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="threshold_g7_g8" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="08:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Junior High first cycle</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 9-10 Late Threshold</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="threshold_g9_g10" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="08:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Junior High second cycle</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">SHS AM Threshold</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="threshold_shs_am" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="08:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Senior High AM cutoff</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dismissal Times Section -->
                    <div class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-100 bg-blue-50/50">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <i data-lucide="door-open" class="w-5 h-5 text-blue-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Dismissal Times</h3>
                                    <p class="text-sm text-gray-500">When students leave school</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Kinder Dismissal Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="dismissal_kinder" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="11:30">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Half-day schedule</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 1-6 Dismissal Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="dismissal_g1_g6" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="15:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">3:00 PM</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 7-10 Dismissal Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="dismissal_g7_g10" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="16:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">4:00 PM</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Grades 11-12 Dismissal Time</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="dismissal_g11_g12" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="16:30">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">4:30 PM</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Grace Period Section -->
                    <div class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-100 bg-violet-50/50">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-violet-100 rounded-xl flex items-center justify-center">
                                    <i data-lucide="hourglass" class="w-5 h-5 text-violet-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Grace Period Configuration</h3>
                                    <p class="text-sm text-gray-500">Buffer time added to entry time</p>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="max-w-md">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Grace Period (minutes)</label>
                                <div class="relative">
                                    <i data-lucide="timer" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                    <input type="number" id="grace_period_minutes" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="15" min="0" max="60">
                                </div>
                                <p class="text-xs text-gray-400 mt-2">Buffer time added to entry time before marking student as late</p>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Attendance Rules Tab -->
            <div id="attendanceRulesTab" class="hidden">
                <div class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-100 bg-gray-50/50">
                        <h3 class="font-semibold text-gray-800 flex items-center gap-2">
                            <i data-lucide="clipboard-list" class="w-5 h-5 text-violet-500"></i>
                            Attendance Rules Configuration
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Define rules for attendance handling and status calculations</p>
                    </div>
                    <div class="p-6 space-y-6">
                        <!-- Absence Rules -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                <i data-lucide="user-x" class="w-5 h-5 text-red-500"></i>
                                Absence Rules
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Minimum Minutes for Half-Day</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="number" id="halfday_minutes" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="120" min="60" max="240">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Minimum minutes present to count as half-day</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Automatic Absent After (minutes)</label>
                                    <div class="relative">
                                        <i data-lucide="clock" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="number" id="auto_absent_after" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="60" min="0" max="120">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Minutes after start time to auto-mark absent</p>
                                </div>
                            </div>
                        </div>

                        <!-- Tardiness Rules -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                <i data-lucide="clock-alert" class="w-5 h-5 text-amber-500"></i>
                                Tardiness Rules
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Tardiness Cap (minutes)</label>
                                    <div class="relative">
                                        <i data-lucide="timer" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="number" id="tardiness_cap" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="30" min="5" max="60">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Max minutes late before full absent</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Allow Excuse Letter Override</label>
                                    <select id="allow_excuse_override" class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all cursor-pointer">
                                        <option value="true">Yes - Excused with valid letter</option>
                                        <option value="false">No - All tardiness counts</option>
                                    </select>
                                    <p class="text-xs text-gray-400 mt-2">Allow excuse letters to override tardiness</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notifications Tab -->
            <div id="notificationsTab" class="hidden">
                <div class="bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-100 bg-gray-50/50">
                        <h3 class="font-semibold text-gray-800 flex items-center gap-2">
                            <i data-lucide="bell" class="w-5 h-5 text-violet-500"></i>
                            Attendance Notifications
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Configure automated notifications for attendance events</p>
                    </div>
                    <div class="p-6 space-y-6">
                        <!-- Notification Toggles -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                <i data-lucide="toggle-left" class="w-5 h-5 text-gray-500"></i>
                                Notification Triggers
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <label class="flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-xl cursor-pointer hover:border-violet-300 transition-all">
                                    <input type="checkbox" id="notify_late" checked class="w-5 h-5 text-violet-600 rounded border-gray-300 focus:ring-violet-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Late Notifications</p>
                                        <p class="text-sm text-gray-500">Notify parents when student is marked late</p>
                                    </div>
                                </label>
                                <label class="flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-xl cursor-pointer hover:border-violet-300 transition-all">
                                    <input type="checkbox" id="notify_absent" checked class="w-5 h-5 text-violet-600 rounded border-gray-300 focus:ring-violet-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Absent Notifications</p>
                                        <p class="text-sm text-gray-500">Notify parents when student is absent</p>
                                    </div>
                                </label>
                                <label class="flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-xl cursor-pointer hover:border-violet-300 transition-all">
                                    <input type="checkbox" id="notify_clinic" checked class="w-5 h-5 text-violet-600 rounded border-gray-300 focus:ring-violet-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Clinic Notifications</p>
                                        <p class="text-sm text-gray-500">Notify when student goes to clinic</p>
                                    </div>
                                </label>
                                <label class="flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-xl cursor-pointer hover:border-violet-300 transition-all">
                                    <input type="checkbox" id="notify_early_dismissal" class="w-5 h-5 text-violet-600 rounded border-gray-300 focus:ring-violet-500">
                                    <div>
                                        <p class="font-medium text-gray-800">Early Dismissal</p>
                                        <p class="text-sm text-gray-500">Notify when student leaves early</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Notification Timing -->
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h4 class="font-semibold text-gray-800 mb-4 flex items-center gap-2">
                                <i data-lucide="clock" class="w-5 h-5 text-blue-500"></i>
                                Notification Timing
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Batch Notify Time (AM)</label>
                                    <div class="relative">
                                        <i data-lucide="sun" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="notify_batch_am" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="10:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Send morning attendance summary</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Batch Notify Time (PM)</label>
                                    <div class="relative">
                                        <i data-lucide="moon" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="time" id="notify_batch_pm" class="w-full border border-gray-200 rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/20 transition-all" value="15:00">
                                    </div>
                                    <p class="text-xs text-gray-400 mt-2">Send afternoon attendance summary</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html>
